<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<link rel="shortcut icon" type="image/png" href="https://icons.iconarchive.com/icons/custom-icon-design/pretty-office-10/64/Pencil-icon.png"/>

<header>
    <title>Ritomani </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<style>
    /* static/style.css */

.card li {
    font-size: 3vh;
}

.green {
    background-color: rgb(23, 189, 23);
}

.yellow {
    background-color: rgb(248, 233, 28);
}

.red {
    background-color: rgb(202, 13, 13);
}

.orange {
    background-color: #ffa600;
}



select option[value="green"] {
    background-color:#0F0
};

select option[value="yellow"] {
    background-color:#FF0
}

select option[value="orange"] {
    background-color:#ffa600
}

select option[value="red"] {
    background-color:#F00
}


.footer {
    padding: 1em;
    /* position: fixed; */
   left: 0;
   bottom: 0;
   width: 100%;
}

.card li {
    height: 10vh;
}
</style>


</header>





<body >
    <div class="w3-center" id="loading">
        <img src="https://i.ibb.co/2YG1WTT/ritomani.png" alt="Ritomani" style="width: 100%; height: auto;">
    </div>
    <div class="w3-container" id="card-container"></div>
</body>

<footer class="footer w3-black">
    <div class="w3-center w3-black">
        <h2>Ny Omgång:</h3>
        <div id="level_buttons">
            <a class="w3-button w3-green"   onclick="newCards(0)">
                GRÖNT
            </a>
            <a class="w3-button w3-yellow"  onclick="newCards(1)">
                GULT
            </a>
            <a class="w3-button w3-orange"  onclick="newCards(2)">
                ORANGE
            </a>
            <a class="w3-button w3-red"     onclick="newCards(3)">
                RÖTT
            </a>
        </div>
        <a href="https://docs.google.com/document/d/e/2PACX-1vRWyIyVfKWjqYHH3Js3eh1EgrtGJZIh03rtI9uFLrRQhNBNt5H9BMcubcC1kALe2Eo6ptfrUtZuoCBt/pub">Regler</a>
    </div>
</footer>


<script type="text/javascript">

    var page = {
        "green": 1,
        "yellow": 2,
        "orange": 3,
        "red": 4
    };
    var global_words = [];

    for (let i=0; i < 4; i++) {
        var url = 'https://spreadsheets.google.com/feeds/cells/1ifIDkf4Mk3RTII5DG-QV5eI2xWva94lfCyLHAM-fSXg/' + (i+1) + '/public/full?alt=json';
        $.getJSON(url, function(data) {
            var deck_data = data.feed.entry;
            global_words[i] = deck_data;
        });
    }


    function newCards(level){
        console.log("level: ", level)
        console.log("nbrCards: ", global_words[level] && global_words[level].length/7)

    }

    function add_card(title, index, entry){
        var card_container = $('#card-container');

        var start = index * 7;
        var end = start + 7;
        var card_list = '';
        for (i = start; i < end; i++) {
            card_list += '<li>' + entry[i].content.$t.toUpperCase() + '</li>'
        }

        var card = $('<div class="w3-card-4 w3-container w3-third card w3-' + level + '">' +
            '<h3 class="w3-center">' +  title + '</h3>' +
            '<ol class="w3-ol" id="ol-C">' +
            card_list +
            '</ol>' +
        '</div>')
        card_container.append(card)
    }



    function handle_data(data) {
        var nbrCards = data.length/7;
        var resolved_seed = seed + Math.floor(turn / nbrCards / 3);
        var rand = mulberry32(resolved_seed);

        var deck = Array.from(Array(nbrCards).keys())

        // shuffle the cards
        for (let i = deck.length - 1; i > 0; i--) {
            let j = Math.floor(rand() * i);
            let temp = deck[i];
            deck[i] = deck[j];
            deck[j] = temp;
        }

        for (let i = 0; i < (turn*3 % nbrCards); i ++) {
            deck.pop()
        }
        $('#loading').remove();
        add_card("A", deck.pop(), data)
        add_card("B", deck.pop(), data)
        add_card("C", deck.pop(), data)
    }
 </script>
</html>
